/*!
 * http://www.zkea.net/
 * Copyright 2016 ZKEASOFT
 * http://www.zkea.net/licenses
 */
var Easy=Easy||{};Easy.Grid=function(){var gridOptions={text:{PageSize:"分页",CurrentPage:"当前",Refresh:"刷新",FirstPage:"首页",PrePage:"上一页",NextPage:"下一页",LastPage:"尾页",NoData:"无相关数据...",AllRecord:" 共 {0} 条记录",DeleteTitle:"提示",DeleteConfirm:"确定要删除选中项吗？",SelectWorm:"请至少选择一项进行操作！",Delete:"删除选中项",Yes:"是",No:"否"},dataUrl:"",chVale:null,templetes:[],templeteValues:[],model:{Property:{Data:"",DataType:"",DisplayName:"",Format:"",Hidden:0,Name:"",Width:150}},canSearch:!1,rowDataBindEventHandler:null,checkBoxEventHandler:null,dataSuccessEventHandler:null,checkBox:!1,orderArray:[],orderCol:"",orderType:1,scrollLeft:0,constHeight:!1,isLoading:!1,queryString:"",deleteUrl:"",heightFix:10,jsonData:null,allPage:0,headerWidthDiff:20,dateFormat:"YYYY/MM/DD"},grid={name:""},n={};grid.body=$(["<div class='EasyGrid panel panel-default'>","<div class='GridContent'><div class='GridToolBar panel-heading'><\/div><div class='GridHeader'><\/div><div class='GridBody'><\/div><\/div>","<div class='Gridfoot'>","<div class='GridDelete' title='"+gridOptions.text.Delete+"'>&nbsp;<\/div>","<label>",gridOptions.text.PageSize,"<\/label>","<select id='GridPageSize' easy='easy'>","<option value='10'>10<\/option>","<option value='20' selected='selected'>20<\/option>","<option value='30'>30<\/option>","<option value='50'>50<\/option>","<option value='100'>100<\/option>","<\/select>","<label for='GridPageIdex'>",gridOptions.text.CurrentPage,"<\/label><input id='GridPageIdex' type='text' value='1' ValueType='Num' />","<label id='PageInfo'><\/label>","<label id='Count'><\/label>","<a id='PageGo' class='glyphicon glyphicon-repeat' title='"+gridOptions.text.Refresh+"'>","<\/a>","<a id='PageFirst' class='glyphicon glyphicon-fast-backward' title='"+gridOptions.text.FirstPage+"'>","<\/a>","<a id='PagePre' class='glyphicon glyphicon-step-backward' title='"+gridOptions.text.PrePage+"'>","<\/a>","<a id='PageNext' class='glyphicon glyphicon-step-forward' title='"+gridOptions.text.NextPage+"'>","<\/a>","<a id='PageLast' class='glyphicon glyphicon-fast-forward' title='"+gridOptions.text.LastPage+"'>","<\/a>","<\/div><\/div>"].join(""));var i=$(".GridHeader",grid.body),t=$(".GridBody",grid.body),r=$("<tbody class='GridSearch'><\/tbody>");grid.initGrid=function(n){function a(){var n=grid.body.parent().parent().height();return grid.body.parent().siblings(":not(script)").each(function(){n-=$(this).outerHeight();n-=parseInt($(this).css("margin-top"));n-=parseInt($(this).css("margin-bottom"))}),n}var o=0,s=$("<table class='header' cellpadding='0' cellspacing='0'><\/table>"),f="<tr class='trTitle'>",h,u,c,e,t,l;gridOptions.checkBox&&gridOptions.chVale&&(f+="<th style='width:20px' align='center'><input type='checkbox' class='CheckBoxAll' /><\/th>",o+=20);gridOptions.model=n;for(h in gridOptions.model)if(gridOptions.model.hasOwnProperty(h)){if(u=gridOptions.model[h],u.Hidden)continue;u.Width||(u.Width=150);gridOptions.orderCol||(gridOptions.orderCol=u.Name);f+="<th style='width:"+u.Width+"px' col='"+u.Name+"'><div class='coData clearfix' style='"+u.Width+"px'><span class='pull-left'>"+u.DisplayName+"<\/span><span class='resize-col'><\/span><\/div><\/th>";o+=u.Width}if(s.html("<thead>"+f+"<th style='width:"+gridOptions.headerWidthDiff+"px'><\/th><\/thead>"),s.width(o+gridOptions.headerWidthDiff),i.html(s),gridOptions.orderType===1?i.find("th[col='"+gridOptions.orderCol+"']").addClass("OrderUp"):i.find("th[col='"+gridOptions.orderCol+"']").addClass("OrderDown"),f="",gridOptions.canSearch){f="<tr>";gridOptions.checkBox&&gridOptions.chVale&&(f+="<th align='center'><input type='button' class='ClearSearch' /><\/th>");for(c in gridOptions.model)if(gridOptions.model.hasOwnProperty(c)){if(e="",t=gridOptions.model[c],t.Hidden)continue;switch(t.DataType){case"String":e="<input class='condition' type='text' DataType='"+t.DataType+"'  name='"+t.Name+"' OperatorType='7' title='"+t.DisplayName+"'/>";break;case"Boolean":e=["<select class='easy condition' DataType='"+t.DataType+"'  name='"+t.Name+"' OperatorType='1' title='"+t.DisplayName+"'>","<option><\/option>","<option value='true'>"+gridOptions.text.Yes+"<\/option>","<option value='false'>"+gridOptions.text.No+"<\/option>","<\/select>"].join("");break;case"Decimal":case"Single":case"Int16":case"Int64":case"Int32":e=["<div class='RangeOption clearfix'>","<input class='condition' type='hidden' DataType='"+t.DataType+"'  name='"+t.Name+"' OperatorType='1' title='"+t.DisplayName+"'/>","<input class='RangeAdd' type='button'  value='' title='"+t.DisplayName+"'/>","<input type='button' class='RangeClear'  value='' title='"+t.DisplayName+"'/><\/div>"].join("");break;case"DateTime":e=["<div class='RangeOption clearfix'>","<input class='condition' type='hidden' DataType='"+t.DataType+"' Format='"+(t.JsDateFormat||gridOptions.dateFormat)+"'  name='"+t.Name+"' OperatorType='1' title='"+t.DisplayName+"'/>","<input class='RangeAdd' type='button'  value='' title='"+t.DisplayName+"'/>","<input type='button' class='RangeClear'  value='' title='"+t.DisplayName+"'/><\/div>"].join("");break;case"Select":l="<option><\/option>";l+=t.Data||"";e="<select class='easy condition' multiple='multiple' name='"+t.Name+"' DataType='"+t.DataType+"'  name='"+t.Name+"' OperatorType='1' title='"+t.DisplayName+"'>"+l+"<\/select>";break;case"None":e="<span><\/span>";break;default:e="<input class='condition' type='text' DataType='"+t.DataType+"'  name='"+t.Name+"' OperatorType='7' title='"+t.DisplayName+"'/>"}f+="<td><div class='searchbox'>"+e+"<\/div><\/td>"}f+=" <td style='width:"+gridOptions.headerWidthDiff+"px'><\/td><\/tr>";r.html(f);i.find("table").append(r);grid.multiSelect()}else r.hide();gridOptions.constHeight||($(window).resize(function(){Easy.Processor(function(){grid.setHeight(a())},200)}),$(function(){setTimeout(function(){grid.setHeight(a())},50)}));grid.resizeColumn()};grid.resizeColumn=function(){$(".resize-col",i).on("mousedown",function(n){var r=$(this).parents("th"),u=gridOptions.model[r.attr("col")],e=$("table.body tr:first>td:eq("+r.index()+")",t),h=$("table.body tr",t),c="td:eq("+r.index()+") .coData",l=$("table.header",i),o=$("table.body",t),a=r.width(),v=o.width(),s=n.clientX,f=$("<div class='move-helper'><\/div>");f.on("mousemove",function(n){var t=a+n.clientX-s,i=v+n.clientX-s;r.width(t);$(".coData",r).width(t);e.width(t);$(".coData",e).width(t);h.each(function(){$(c,$(this)).width(t)});u.Width=t;l.width(i+gridOptions.headerWidthDiff);o.width(i)});f.on("mouseup",function(){$(this).remove();grid.setColumnWidth(u.Name,u.Width)});return grid.body.append(f),!1})};grid.getColumnWidth=function(n){return Easy.Cookie.GetCookie(location.pathname+"_"+grid.name+"_"+n+"_width")};grid.setColumnWidth=function(n,t){return Easy.Cookie.SetCookie(location.pathname+"_"+grid.name+"_"+n+"_width",t,365)};grid.getPageIndex=function(){var n=parseInt($("#GridPageIdex",grid.body).val());return n>=0||(n=1,$("#GridPageIdex",grid.body).val(n)),n-1};grid.getPageSize=function(){return parseInt($("#GridPageSize",grid.body).val())};grid.setPageIndex=function(n){n=parseInt(n)||0;$("#GridPageIdex",grid.body).val(n+1)};grid.loadPage=function(n){grid.setPageIndex(n);grid.reload()};grid.initGridData=function(n){var r,a,f,o,u,s,v,h,y;i.find(".CheckBoxAll").prop("checked",!1).change();t.html("");var c=$("<table class='body' cellpadding='0' cellspacing='0'><\/table>"),l="",e=0;if(n.Rows.length>0)for(r=0;r<n.Rows.length;r++){a="trBe";r%2==0&&(a="trAf");f="<tr class='"+a+"'>";gridOptions.checkBox&&gridOptions.chVale&&(f+="<td style='width:20px' align='center'><input type='checkbox' class='CheckBoxItem' val='"+n.Rows[r][gridOptions.chVale]+"' /><\/td>",r===0&&(e+=20));for(o in gridOptions.model)if(gridOptions.model.hasOwnProperty(o)){if(u=gridOptions.model[o],u.Hidden)continue;f+="<td "+(r===0?"style='width:"+u.Width+"px'":"")+"><div class='coData' style='width:"+u.Width+"px'>"+grid.getTempleteValue(o,n.Rows[r],u)+"<\/div><\/td>";r===0&&(e+=u.Width)}f+="<\/tr>";l+=f;gridOptions.rowDataBindEventHandler&&gridOptions.rowDataBindEventHandler.call(this,n.Rows[r])}else{s="<tr>";v=gridOptions.text.NoData;for(h in gridOptions.model)if(gridOptions.model.hasOwnProperty(h)){if(gridOptions.model[h].Hidden)continue;y=gridOptions.model[h].Width||150;e+=y;s+="<td style='width:"+y+"px;border-bottom:none;'>"+v+"<\/td>";v=""}s+="<\/tr>";l+=s}c.html("<tbody>"+l+"<\/tbody>");t.html(c);c.width(e);grid.setPageIndex(n.PageIndex);gridOptions.allPage=Math.floor(n.RecordCount/n.PageSize);gridOptions.allPage+=n.RecordCount%n.PageSize==0?0:1;grid.body.find("#PageInfo").html("["+(n.PageIndex+1)+"/"+gridOptions.allPage+"]");grid.body.find("#Count").html(gridOptions.text.AllRecord.replace("{0}",n.RecordCount));t.scrollLeft(gridOptions.scrollLeft);gridOptions.dataSuccessEventHandler!=null&&gridOptions.dataSuccessEventHandler.call()};grid.dataFormater={Boolean:function(n){return n==="True"?gridOptions.text.Yes:gridOptions.text.No},None:function(n){return n},Provider:function(n){return this[n.DataType]||this.None}};grid.reload=function(){if(!gridOptions.isLoading){gridOptions.isLoading=!0;grid.body.find("#PageGo").addClass("InnerLonding");gridOptions.scrollLeft=t.scrollLeft();var n=[],i=[];r.find(".condition").each(function(){var e,o,f,r,u,t,s;if($(this).val())switch($(this).attr("DataType")){case"Select":e=[];o=$(this);$("option:selected",this).each(function(){e.push({Property:o.attr("name"),Value:$(this).val(),DataType:o.attr("DataType"),OperatorType:1,ConditionType:2})});n.push({Conditions:e});break;case"Decimal":case"Single":case"Int16":case"Int64":case"Int32":f=[];r=$(this).val().split("@");r.length===3&&(r[0]&&f.push({Property:$(this).attr("name"),Value:r[0],DataType:$(this).attr("DataType"),OperatorType:3,ConditionType:1}),r[1]&&f.push({Property:$(this).attr("name"),Value:r[1],DataType:$(this).attr("DataType"),OperatorType:5,ConditionType:1}),r[2]&&f.push({Property:$(this).attr("name"),Value:r[2],DataType:$(this).attr("DataType"),OperatorType:1,ConditionType:1}),n.push({Conditions:f}));break;case"DateTime":u=[];t=$(this).val().split("@");t.length===3&&(t[0]&&(t[0].indexOf(":")<0&&(t[0]+=" 0:0:0"),u.push({Property:$(this).attr("name"),Value:t[0],DataType:$(this).attr("DataType"),OperatorType:3,ConditionType:1})),t[1]&&(t[1].indexOf(":")<0&&(t[1]+=" 23:59:59"),u.push({Property:$(this).attr("name"),Value:t[1],DataType:$(this).attr("DataType"),OperatorType:5,ConditionType:1})),t[2]&&(s=t[2].indexOf(":")>=0,u.push({Property:$(this).attr("name"),Value:t[2]+(s?"":" 0:00:00"),DataType:$(this).attr("DataType"),OperatorType:3,ConditionType:1}),u.push({Property:$(this).attr("name"),Value:t[2]+(s?"":" 23:59:59"),DataType:$(this).attr("DataType"),OperatorType:5,ConditionType:1})),n.push({Conditions:u}));break;default:i.push({Property:$(this).attr("name"),Value:$(this).val(),DataType:$(this).attr("DataType"),OperatorType:$(this).attr("OperatorType"),ConditionType:1})}});$.ajax({url:gridOptions.dataUrl+(gridOptions.queryString===""?"":"?"+gridOptions.queryString),data:{ConditionGroups:n,Conditions:i,PageIndex:grid.getPageIndex(),PageSize:grid.getPageSize(),OrderBy:gridOptions.orderArray},type:"post",success:function(data){gridOptions.isLoading=!1;try{gridOptions.jsonData=typeof data=="string"?eval("("+data+")"):data}catch(ex){return alert(ex.message),!1}return grid.initGridData(gridOptions.jsonData),grid.body.find("#PageGo").removeClass("InnerLonding"),!0},error:function(n){gridOptions.isLoading=!1;grid.body.find("#PageGo").removeClass("InnerLonding");t.html("<h1>Grid.Ajax.Error:"+n.status+"<\/h1>")}},"json")}};grid.clearCondition=function(){return r.find("input.condition").val(""),r.find(".bg-info").removeClass("bg-info"),r.find("select.condition option").prop("selected",!1),r.find("select").change(),$(".RangeAdd").data("shown",!1),grid.reload(),!1};grid.deleteData=function(){var n=[];t.find(".CheckBoxItem:checked").each(function(){n.push($(this).attr("val"))});n.length>0?Easy.ShowMessageBox(gridOptions.text.DeleteTitle,gridOptions.text.DeleteConfirm,function(){grid.body.find(".GridDelete").addClass("InnerLonding");$.ajax({url:gridOptions.deleteUrl,data:{ids:n.join(",")},success:function(n){n.Status!=1&&Easy.ShowMessageBox(gridOptions.text.DeleteTitle,n.Message);n.Status!=3&&grid.reload();grid.body.find(".GridDelete").removeClass("InnerLonding")},error:function(n){grid.body.find(".GridDelete").removeClass("InnerLonding");Easy.ShowMessageBox(gridOptions.text.DeleteTitle,n.status)},type:"post"},"json")},!0):Easy.ShowMessageBox(gridOptions.text.DeleteTitle,gridOptions.text.SelectWorm)};grid.showRangeCondition=function(){function s(){var t=$("#GreaterThanOrEqualTo",n).val(),r=$("#LessThanOrEqualTo",n).val(),f=$("#EqualTo",n).val();i.val(u(t)+"@"+u(r)+"@"+u(f));i.val()!=="@@"?i.parent().addClass("bg-info"):i.parent().removeClass("bg-info");grid.reload()}function o(){r||(r=setTimeout(function(){t.data("shown",!1);n.remove()},100))}var t=$(this),n,i,e,u,f,r;if(!t.data("shown")){t.data("shown",!0);n=$("<div class='RangeConditionBox form' tabindex='-1'><div class='form-group'><div class='input-group'><label for='GreaterThanOrEqualTo' class='input-group-addon'>>=<\/label><input  class='form-control' type='text' id='GreaterThanOrEqualTo' /><\/div><\/div><div class='form-group'><div class='input-group'><label for='LessThanOrEqualTo' class='input-group-addon'><=<\/label><input  class='form-control' type='text' id='LessThanOrEqualTo' /><\/div><\/div><div class='form-group'><div class='input-group'><label for='EqualTo' class='input-group-addon'>&nbsp;=&nbsp;<\/label><input type='text'  class='form-control' id='EqualTo' /><\/div><\/div><\/div>");i=t.parent().find("input.condition");t.parent().append(n);e=t.position().left;e+n.outerWidth()>grid.body.outerWidth()&&(e=grid.body.outerWidth()-n.outerWidth());n.css("left",e);n.css("top",t.position().top+t.outerHeight());u=function(n){return n};switch(i.attr("DataType")){case"DateTime":$(".form-control",n).attr("ValueType","Date").addClass("Date").datetimepicker({locale:"zh_cn",format:i.attr("Format")||gridOptions.dateFormat}).on("keydown",!1);break;case"Decimal":case"Single":case"Int16":case"Int64":case"Int32":n.find("input").attr("ValueType","Num").addClass("Number");u=function(n){return Number(n)||""}}f=i.val().split("@");f.length===3&&(n.find("#GreaterThanOrEqualTo").val(f[0]),n.find("#LessThanOrEqualTo").val(f[1]),n.find("#EqualTo").val(f[2]));$("input.form-control",n).on("keyup",function(n){if(n.keyCode===13){o();return}s()}).on("dp.change",s).on("focus",function(){clearTimeout(r);r=null}).on("blur",o);n.on("focus",function(){clearTimeout(r);r=null}).on("blur",o).focus()}};grid.getTempleteValue=function(n,t,i){var f=gridOptions.templetes.ValueIndex(n),r,u;if(f!==-1){r=gridOptions.templeteValues[f];for(u in t)if(t.hasOwnProperty(u))while(r.indexOf("{"+u+"}")>=0)r=r.replace("{"+u+"}",grid.dataFormater.Provider(i)(t[u]));return r}return grid.dataFormater.Provider(i)(t[n])};grid.multiSelect=function(){$("select.easy[multiple]",i).each(function(){var i,t,n,r;if(!$(this).attr("easy")){$(this).attr("easy","easy");i=$(this);t=$(["<div class='DropDownList'>","<div class='TextPlace' title="+i.attr("title")+"><span><\/span><\/div><div class='DropIcon'>&nbsp;<\/div>","<div style='clear:both'><\/div>","<\/div>"].join(""));t.insertAfter(i);n=$("<ul class='DropDownList_Options dropdown-menu' tabindex='-1'><\/ul>");t.on("click",".Clear",function(){return $("option",i).prop("selected",!1),i.change(),t.removeClass("Open"),n.hide(),!1});i.change(function(){var n="",r;$("option:checked",i).each(function(){n+=n?","+$(this).text():$(this).text()});n?(r=t.find(".TextPlace"),r.attr("title",n),r.html("<span>"+n+"<\/span><div class='Clear'><\/div>")):t.find(".TextPlace").html("<span>&nbsp;<\/span>");t.find(".TextPlace").css("position","relative")});n.on("blur",function(){r||(t.removeClass("Open"),n.hide());r=!1});n.on("mousedown",function(){r=!0});n.on("click",".checkbox input[type=checkbox]",function(){var t=$(this).val(),r=$(this).prop("checked");$("option",i).each(function(){$(this).val()===t&&$(this).prop("selected",r)});i.trigger("change");n.focus()});i.hide();n.insertAfter(t);t.click(function(){if(t.hasClass("Open"))return t.removeClass("Open"),n.hide(),!0;t.addClass("Open");var r=[];return $("option",i).each(function(){var n=$(this).attr("value"),t,i;n&&(t=$(this).text(),i=$(this).prop("selected"),i?r.push("<li val='"+n+"'><a><label class='checkbox'><input type='checkbox' checked='checked' value='"+n+"' />"+t+"<\/label><\/a><\/li>"):r.push("<li val='"+n+"'><a><label class='checkbox'><input type='checkbox' value='"+n+"' />"+t+"<\/label><\/a><\/li>"))}),n.empty(),n.append(r.join("")),n.show(),n.css("left",$(this).position().left),n.css("top",$(this).position().top+$(this).outerHeight()),n.focus(),!0})}})};grid.checkBoxClick=function(n){n?$(this).prop("checked")?$(this).parents("tr").addClass("selected"):$(this).parents("tr").removeClass("selected"):$(".CheckBoxAll",i).prop("checked")?$("tr.trAf,tr.trBe",t).addClass("selected"):$("tr.trAf,tr.trBe",t).removeClass("selected");gridOptions.checkBoxEventHandler&&gridOptions.checkBoxEventHandler.call(this,grid.getSelectedRows())};grid.getSelectedRows=function(){var n=[];return grid.body.find(".CheckBoxItem:input:checked").each(function(t){$(this).prop("checked")&&gridOptions.jsonData&&gridOptions.jsonData.Rows&&n.push(gridOptions.jsonData.Rows[t])}),n};grid.setUrl=function(t){return gridOptions.dataUrl=t,n};grid.setGridArea=function(t){var i=$("#"+t),r;return i.length>0?(r=$(".easy-grid").size(),i.addClass("easy-grid grid-"+r),i.append(grid.body),i.data("easy-grid",n),grid.name="grid_"+r):$("body").append(grid.body),n};grid.showCheckBox=function(t){return gridOptions.chVale=t,gridOptions.checkBox=!0,n};grid.setHeight=function(t){return $(".GridBody",grid.body).height(t-$(".GridHeader",grid.body).outerHeight()-$(".Gridfoot",grid.body).outerHeight()-$(".GridToolBar",grid.body).outerHeight()-gridOptions.heightFix),gridOptions.constHeight=!0,n};grid.setModel=function(t){var i,r;for(i in t)t.hasOwnProperty(i)&&(r=parseInt(grid.getColumnWidth(i)),r&&(t[i].Width=r));return grid.initGrid(t),n};grid.searchAble=function(){return gridOptions.canSearch=!0,n};grid.orderBy=function(t,i){return gridOptions.orderCol||(gridOptions.orderCol=t,gridOptions.orderType=i),gridOptions.orderArray.push({OrderCol:t,OrderType:i}),n};grid.setToolbar=function(t){var i=$(".GridToolBar",grid.body);return $(t).appendTo(i),i.show(),n};grid.setDeleteUrl=function(t){return gridOptions.deleteUrl=t,$(".GridDelete",grid.body).show(),n};grid.onRowDataBind=function(t){return gridOptions.rowDataBindEventHandler=t,n};grid.onCheckBoxChange=function(t){return gridOptions.checkBoxEventHandler=t,n};grid.onSuccess=function(t){return gridOptions.dataSuccessEventHandler=t,n};grid.setColumnTemplete=function(t,i){return gridOptions.templetes.ContainsValue(t)||(gridOptions.templetes.push(t),gridOptions.templeteValues.push(i)),n};t.on("scroll",function(){i.scrollLeft($(this).scrollLeft())});t.on("click",".CheckBoxItem",grid.checkBoxClick);r.on("keydown",function(n){n.keyCode===13&&grid.reload()});r.on("click",".RangeAdd",grid.showRangeCondition);r.on("click",".RangeClear",function(){$("input.condition",$(this).parent()).val("");$(this).parent().removeClass("bg-info");grid.reload()});r.on("click",".ClearSearch",grid.clearCondition);r.on("change","select",grid.reload);grid.body.on("keyup","#GridPageIdex",function(n){n.keyCode===13&&$("#PageGo",grid.body).click()});grid.body.on("change","#GridPageSize",function(){grid.loadPage(0)});grid.body.on("click","#PageGo",grid.reload);grid.body.on("click","#PageFirst",function(){grid.loadPage(0)});grid.body.on("click","#PagePre",function(){var n=grid.getPageIndex();n>0&&grid.loadPage(n-1)});grid.body.on("click","#PageNext",function(){var n=grid.getPageIndex();n<gridOptions.allPage-1&&grid.loadPage(n+1)});grid.body.on("click","#PageLast",function(){grid.loadPage(gridOptions.allPage-1)});grid.body.on("click",".GridDelete",grid.deleteData);i.on("click",".CheckBoxAll",function(){t.find("tr").find(".CheckBoxItem").prop("checked",$(this).prop("checked"));grid.checkBoxClick()});i.on("click","th[col]",function(){var n=$(this).attr("col");return n===gridOptions.orderCol?gridOptions.orderType=gridOptions.orderType===1?2:1:(gridOptions.orderCol=n,gridOptions.orderType=1),gridOptions.orderArray=[],gridOptions.orderArray.push({OrderCol:gridOptions.orderCol,OrderType:gridOptions.orderType}),i.find("th[col]").removeAttr("class"),gridOptions.orderType===1?$(this).addClass("OrderUp"):$(this).addClass("OrderDown"),grid.reload(),!1});return n.Show=grid.reload,n.Reload=grid.reload,n.OnRowDataBind=grid.onRowDataBind,n.SetColumnTemplete=grid.setColumnTemplete,n.SetUrl=grid.setUrl,n.SetGridArea=grid.setGridArea,n.ShowCheckBox=grid.showCheckBox,n.OnCheckBoxChange=grid.onCheckBoxChange,n.Height=grid.setHeight,n.SetModel=grid.setModel,n.SearchAble=grid.searchAble,n.OnSuccess=grid.onSuccess,n.OrderBy=grid.orderBy,n.SetBoolBar=grid.setToolbar,n.SetDeleteUrl=grid.setDeleteUrl,n.Delete=grid.deleteData,n.getSelectedRows=grid.getSelectedRows,n};$.fn.grid=function(){return $(this).data("easy-grid")};